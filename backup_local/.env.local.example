# EDRS Local Development Environment Variables
# Smart Soft Coding Configuration - Copy to .env.local

# =================================================================
# INFRASTRUCTURE CONFIGURATION
# =================================================================

# Database Ports (avoid conflicts with production)
POSTGRES_PORT=5433
MONGO_PORT=27018
REDIS_PORT=6380

# Application Ports
BACKEND_PORT=8001
FRONTEND_PORT=3001
NGINX_PORT=8080
NGINX_SSL_PORT=8443

# =================================================================
# DATABASE CONFIGURATION
# =================================================================

# PostgreSQL (Primary Database)
POSTGRES_DB=edrs_local_db
POSTGRES_USER=edrs_local_user
POSTGRES_PASSWORD=LocalDev123!@#
POSTGRES_HOST=localhost

# MongoDB (Secondary Database)
MONGO_DB=edrs_local_mongo
MONGO_USER=edrs_mongo_admin
MONGO_PASSWORD=LocalMongo123!@#
MONGO_HOST=localhost

# Redis (Caching & Sessions)
REDIS_PASSWORD=LocalRedis123!@#
REDIS_HOST=localhost

# =================================================================
# SECURITY CONFIGURATION
# =================================================================

# Django Secret Key (Local Development Only)
SECRET_KEY=local-django-secret-key-for-development-only-change-in-production

# JWT Configuration
JWT_SECRET_KEY=local-jwt-secret-for-development
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_LIFETIME=60
JWT_REFRESH_TOKEN_LIFETIME=1440

# Admin User (Auto-created)
DJANGO_SUPERUSER_USERNAME=admin
DJANGO_SUPERUSER_EMAIL=admin@edrs.local
DJANGO_SUPERUSER_PASSWORD=admin123

# =================================================================
# APPLICATION CONFIGURATION
# =================================================================

# Application Details
APP_NAME=EDRS Local Development
APP_VERSION=1.0.0-local
API_VERSION=v1
API_PREFIX=api

# Environment
ENVIRONMENT=local
DEBUG=True
NODE_ENV=development

# Host Configuration
BACKEND_HOST=127.0.0.1
FRONTEND_HOST=127.0.0.1
ALLOWED_HOSTS=localhost,127.0.0.1,backend,frontend

# =================================================================
# CORS CONFIGURATION
# =================================================================

# CORS Settings (Liberal for local development)
CORS_ALLOW_ALL_ORIGINS=True
CORS_ALLOWED_ORIGINS=http://localhost:3001,http://127.0.0.1:3001,http://localhost:8080,http://127.0.0.1:8080

# CORS Headers
CORS_ALLOW_CREDENTIALS=True
CORS_ALLOW_HEADERS=*
CORS_ALLOW_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS

# =================================================================
# EMAIL CONFIGURATION (Local Testing)
# =================================================================

# Email Backend (Console for local development)
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend
EMAIL_HOST=localhost
EMAIL_PORT=587
EMAIL_USE_TLS=False
DEFAULT_FROM_EMAIL=noreply@edrs.local

# =================================================================
# FILE STORAGE CONFIGURATION
# =================================================================

# Static Files
STATIC_URL=/static/
STATIC_ROOT=/app/static
STATICFILES_STORAGE=django.contrib.staticfiles.storage.StaticFilesStorage

# Media Files
MEDIA_URL=/media/
MEDIA_ROOT=/app/media

# =================================================================
# DEVELOPMENT TOOLS
# =================================================================

# Django Debug Toolbar
ENABLE_DEBUG_TOOLBAR=True

# Django Extensions
ENABLE_DJANGO_EXTENSIONS=True

# API Documentation
ENABLE_SWAGGER_UI=True
ENABLE_REDOC=True

# Frontend Development
VITE_ENABLE_DEVTOOLS=true
VITE_ENABLE_DEBUG=true
VITE_HOT_RELOAD=true

# =================================================================
# LOGGING CONFIGURATION
# =================================================================

# Log Levels
LOG_LEVEL=DEBUG
DJANGO_LOG_LEVEL=DEBUG
SQL_LOG_LEVEL=INFO

# Log Files
LOG_FILE=/app/logs/edrs.log
ERROR_LOG_FILE=/app/logs/error.log
ACCESS_LOG_FILE=/app/logs/access.log

# =================================================================
# MONITORING & HEALTH CHECKS
# =================================================================

# Health Check Configuration
HEALTH_CHECK_ENABLED=True
HEALTH_CHECK_DATABASE=True
HEALTH_CHECK_CACHE=True

# Performance Monitoring
ENABLE_PROFILING=True
ENABLE_QUERY_DEBUGGING=True

# =================================================================
# FEATURE FLAGS (Local Development)
# =================================================================

# Feature Toggles
ENABLE_API_VERSIONING=True
ENABLE_RATE_LIMITING=False
ENABLE_AUTHENTICATION=True
ENABLE_PERMISSIONS=True

# Development Features
ENABLE_MOCK_DATA=True
ENABLE_TEST_ENDPOINTS=True
ENABLE_DEV_MIDDLEWARE=True

# =================================================================
# P&ID ANALYSIS CONFIGURATION
# =================================================================

# OpenAI Configuration
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.3

# OCR Configuration
TESSERACT_CMD=/usr/bin/tesseract
TESSERACT_CONFIG=--oem 3 --psm 6
OCR_CONFIDENCE_THRESHOLD=50

# Image Processing
MAX_IMAGE_SIZE=50MB
ALLOWED_IMAGE_FORMATS=pdf,png,jpg,jpeg,tiff,dwg
IMAGE_PROCESSING_QUALITY=high

# Analysis Configuration
ANALYSIS_TIMEOUT=300
MAX_CONCURRENT_ANALYSES=3
ANALYSIS_RETRY_ATTEMPTS=2

# P&ID Standards Compliance
PID_STANDARD_ISA51=True
PID_STANDARD_ISO10628=True
PID_STANDARD_IEC62424=True

# File Upload Configuration
UPLOAD_CHUNK_SIZE=1MB
UPLOAD_TIMEOUT=600
TEMP_FILE_RETENTION=24h

# =================================================================
# THIRD-PARTY SERVICES (Mock/Local)
# =================================================================

# AWS Services (Local/Mock)
USE_S3=False
AWS_ACCESS_KEY_ID=local-mock-key
AWS_SECRET_ACCESS_KEY=local-mock-secret
AWS_STORAGE_BUCKET_NAME=edrs-local-bucket

# External APIs (Mock Endpoints)
EXTERNAL_API_BASE_URL=http://localhost:9000/mock-api
ENABLE_EXTERNAL_APIS=False

# =================================================================
# DOCKER CONFIGURATION
# =================================================================

# Container Configuration
COMPOSE_PROJECT_NAME=edrs-local
COMPOSE_FILE=docker-compose.local.yml

# Build Configuration
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

# Network Configuration
DOCKER_NETWORK_SUBNET=172.20.0.0/16

# =================================================================
# NOTES & DOCUMENTATION
# =================================================================

# This configuration is specifically designed for local development
# DO NOT use these values in production environments
# Production values are managed separately in Railway/Vercel

# To use this configuration:
# 1. Copy this file to .env.local
# 2. Modify values as needed for your local setup
# 3. Run: docker-compose -f docker-compose.local.yml --env-file .env.local up

# Smart Features:
# - Non-conflicting ports with production
# - Separate database instances
# - Development-friendly CORS settings
# - Enhanced logging and debugging
# - Auto-created admin user
# - Hot reloading for frontend
# - Console email backend
# - Mock external services